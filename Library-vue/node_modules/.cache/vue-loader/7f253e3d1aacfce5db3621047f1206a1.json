{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\BatchAddBook\\index.vue?vue&type=template&id=4eb88fe6&scoped=true","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\BatchAddBook\\index.vue","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1749726395074},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iYmF0Y2hBZGRCb29rIj4KICAgIDxlbC1hbGVydCB0eXBlPSJpbmZvIiBzaG93LWljb24gdGl0bGU9IumAmui/h+S4iuS8oEV4Y2Vs5paH5Lu25p2l5om56YeP5a+85YWl5Zu+5LmmIiA6Y2xvc2FibGU9ImZhbHNlIj48L2VsLWFsZXJ0PgogICAgPGVsLXVwbG9hZAogICAgICAgIHJlZj0idXBsb2FkUmVmIgogICAgICAgIHN0eWxlPSJ3aWR0aDogNTAwcHg7bWFyZ2luLXRvcDogMTBweDsiCiAgICAgICAgZHJhZyBhY3Rpb249IiIgOmF1dG8tdXBsb2FkPSJmYWxzZSIgOmxpbWl0PSIxIgogICAgICAgIGFjY2VwdD0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQsYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsIgogICAgICAgIDpvbi1jaGFuZ2U9ImZpbGVDaGFuZ2UiCiAgICAgICAgOm9uLWV4Y2VlZD0iZmlsZUV4Y2VlZCIKICAgICAgICA6YmVmb3JlLXJlbW92ZT0icmVtb3ZlRmlsZSI+CiAgICAgIDxlbC1pY29uIGNsYXNzPSJlbC1pY29uLS11cGxvYWQiPjx1cGxvYWQtZmlsbGVkIC8+PC9lbC1pY29uPgogICAgICA8ZGl2IGNsYXNzPSJlbC11cGxvYWRfX3RleHQiPgogICAgICAgIOaLluaLveaWh+S7tuWIsOatpOWkhCDmiJYgPGVtPueCueWHu+i/memHjOS4iuS8oDwvZW0+CiAgICAgIDwvZGl2PgogICAgICA8dGVtcGxhdGUgI3RpcD4KICAgICAgICA8ZGl2IGNsYXNzPSJlbC11cGxvYWRfX3RpcCIgc3R5bGU9ImZvbnQtc2l6ZTogMTRweCI+CiAgICAgICAgICDlj6rlhYHorrjmjqXlj5cueGxz5ZKMLnhsc3jmlofku7bvvIzkuIDmrKHlj6rog73kuIrkvKAgMSDkuKrmlofku7YKICAgICAgICA8L2Rpdj4KICAgICAgPC90ZW1wbGF0ZT4KICAgIDwvZWwtdXBsb2FkPgogICAgPGVsLWJ1dHRvbiB0eXBlPSJzdWNjZXNzIiBAY2xpY2s9InVwbG9hZEZpbGUiPuaJuemHj+WvvOWFpTwvZWwtYnV0dG9uPgogICAgPGVsLWJ1dHRvbiB0eXBlPSJpbmZvIiBAY2xpY2s9ImRvd25sb2FkVGVtcGxhdGUiPuaooeadv+aWh+S7tuS4i+i9vTwvZWwtYnV0dG9uPgogIDwvZGl2Pgo="},{"version":3,"sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\BatchAddBook\\index.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC3D,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1B,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACZ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;UACjD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpE,CAAC,CAAC,CAAC,CAAC,CAAC","file":"D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/views/admin/BatchAddBook/index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"batchAddBook\">\n    <el-alert type=\"info\" show-icon title=\"通过上传Excel文件来批量导入图书\" :closable=\"false\"></el-alert>\n    <el-upload\n        ref=\"uploadRef\"\n        style=\"width: 500px;margin-top: 10px;\"\n        drag action=\"\" :auto-upload=\"false\" :limit=\"1\"\n        accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel\"\n        :on-change=\"fileChange\"\n        :on-exceed=\"fileExceed\"\n        :before-remove=\"removeFile\">\n      <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n      <div class=\"el-upload__text\">\n        拖拽文件到此处 或 <em>点击这里上传</em>\n      </div>\n      <template #tip>\n        <div class=\"el-upload__tip\" style=\"font-size: 14px\">\n          只允许接受.xls和.xlsx文件，一次只能上传 1 个文件\n        </div>\n      </template>\n    </el-upload>\n    <el-button type=\"success\" @click=\"uploadFile\">批量导入</el-button>\n    <el-button type=\"info\" @click=\"downloadTemplate\">模板文件下载</el-button>\n  </div>\n</template>\n\n<script>\nimport {UploadFilled} from '@element-plus/icons-vue'\nimport {shallowRef} from \"vue\";\nimport {ElMessage,genFileId} from \"element-plus\";\nimport {batchAddBookApi} from \"@/api/admin\";\n\nexport default {\n  name: \"BatchAddBook\",\n  components:{\n    UploadFilled\n  },\n  setup(){\n    // 下载批量导入的模板文件\n    function downloadTemplate(){\n      let publicPath = process.env.BASE_URL\n      let link = document.createElement('a')\n      link.style.display = 'none'\n      link.href = `${publicPath}批量导入图书模板.xls`\n      console.log(link.href)\n      document.body.appendChild(link)\n      link.click()\n      link.remove()\n    }\n\n    // 上传组件\n    const uploadRef = shallowRef()\n    const currentFile = shallowRef(null)\n    // 文件是否合法\n    function isFileAllowed(file){\n      // 判断文件的类型是否正确\n      const allowType = ['xls','xlsx']\n      let suffix = file.name.substring(file.name.lastIndexOf('.') + 1).toLowerCase()\n      if(allowType.indexOf(suffix) === -1){\n        return false\n      }\n      // 判断大小是否合理 小于2M\n      const limitSize = 1024 * 1024 * 2\n      return file.size <= limitSize;\n    }\n    // 当文件状态改变的时候触发，例如添加文件\n    function fileChange(file){\n      if(!isFileAllowed(file)){\n        ElMessage({type: 'warning',message: '文件不符合要求',duration: 5000,showClose: true})\n        uploadRef.value.handleRemove(file)\n      }else{\n        // 记录当前文件\n        currentFile.value = file.raw\n      }\n    }\n    // 当文件超出限制的时候\n    function fileExceed(files){\n      // 取第一个文件\n      let file = files[0]\n      if(!isFileAllowed(file)){\n        ElMessage({type: 'warning',message: '文件不符合要求',duration: 5000,showClose: true})\n      }else{\n        // 清空列表\n        uploadRef.value.clearFiles()\n        file.uid = genFileId()\n        // 设置第一个文件\n        uploadRef.value.handleStart(file)\n        // 记录当前文件\n        currentFile.value = file\n      }\n    }\n    // 文件移除\n    function removeFile(){\n      currentFile.value = null\n    }\n    // 上传文件\n    function uploadFile(){\n      if(currentFile.value){\n        batchAddBookApi(currentFile.value)\n          .then(()=>{\n            ElMessage({type: 'success',message: '上传文件成功',duration: 5000,showClose: true})\n            uploadRef.value.clearFiles()\n          })\n      }else {\n        ElMessage({type: 'error',message: '请先上传文件',duration: 5000,showClose: true})\n      }\n    }\n    return {\n      downloadTemplate,\n      uploadRef,fileChange,fileExceed,currentFile,removeFile,uploadFile\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.batchAddBook{\n  padding: 20px 30px 30px 20px;\n}\n</style>\n"]}]}