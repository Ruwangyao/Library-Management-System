{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\superadmin\\ManageAdmin\\index.vue?vue&type=style&index=0&id=67512a68&scoped=true&lang=scss","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\superadmin\\ManageAdmin\\index.vue","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1749726397077},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1749726394932},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1749726394615},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1749726393347},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5NYW5hZ2VBZG1pbnsKICBwYWRkaW5nOiAyMHB4IDMwcHggMzBweCAyMHB4Owp9Cg=="},{"version":3,"sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\superadmin\\ManageAdmin\\index.vue"],"names":[],"mappings":";AAwHA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC9B","file":"D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/views/superadmin/ManageAdmin/index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"ManageAdmin\">\n    <el-button type=\"primary\" style=\"margin-bottom: 10px\" @click=\"openAddAdminDialog\">添加管理员</el-button>\n    <el-table :data=\"adminList\" border stripe highlight-current-row table-layout=\"auto\">\n      <el-table-column label=\"序号\" align=\"center\">\n        <template #default=\"{$index}\">{{$index + 1 + (pagination.current - 1) * pagination.limit}}</template>\n      </el-table-column>\n      <el-table-column label=\"用户ID\" prop=\"id\"></el-table-column>\n      <el-table-column label=\"用户名\" prop=\"username\"></el-table-column>\n      <el-table-column label=\"联系方式\" prop=\"email\"></el-table-column>\n      <el-table-column label=\"用户状态\" prop=\"description\"></el-table-column>\n    </el-table>\n    <el-pagination\n        style=\"margin-top: 10px\"\n        background layout=\"total, prev, pager, next\"\n        :total=\"pagination.total\"\n        :page-size=\"pagination.limit\"\n        v-model:current-page=\"pagination.current\"\n        @current-change=\"pageChange\"/>\n\n    <el-dialog title=\"添加管理员\" v-model=\"addAdminDialogVisible\" @closed=\"addAdminDialogClosed\">\n      <template #footer>\n        <el-button @click=\"addAdminDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addAdmin\">确定</el-button>\n      </template>\n      <el-form\n          ref=\"addAdminFormRef\" destroy-on-close label-width=\"auto\"\n          :model=\"addAdminForm\" :rules=\"addAdminFormRules\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"addAdminForm.username\" placeholder=\"请输入管理员用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"addAdminForm.password\" placeholder=\"请输入密码\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"请输入邮箱\" prop=\"email\">\n          <el-input v-model=\"addAdminForm.email\" placeholder=\"请输入邮箱\"></el-input>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {markRaw, onBeforeMount, shallowReactive, shallowRef} from \"vue\";\nimport {getPageAdminInfoApi,addAdminApi} from \"@/api/superadmin\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"ManageAdmin\",\n  setup(){\n    const pagination = shallowReactive({\n      current: 1,\n      limit: 10,\n      total: 0\n    })\n    function pageChange(){\n      getAdminList()\n    }\n\n    const adminList = shallowReactive([])\n    function getAdminList(){\n      adminList.splice(0,adminList.length)\n      getPageAdminInfoApi(pagination.current,pagination.limit)\n        .then(res=>{\n          adminList.push(...res.data.records)\n          pagination.total = res.data.total\n        })\n    }\n    onBeforeMount(()=>{\n      getAdminList()\n    })\n\n    // 添加管理员\n    const addAdminDialogVisible = shallowRef(false)\n    function openAddAdminDialog(){\n      addAdminDialogVisible.value = true\n    }\n    function addAdminDialogClosed(){\n      // 重置表单的值\n      addAdminFormRef.value.resetFields()\n    }\n    // 添加管理员表单组件\n    const addAdminFormRef = shallowRef()\n    // 添加管理员的表单\n    const addAdminForm = shallowReactive({\n      username: '',\n      password: '',\n      email: ''\n    })\n    const addAdminFormRules = {\n      username: [{required: true,trigger:'blur',message: '用户名不能为空'}],\n      password: [{required: true,trigger:'blur',message: '密码不能为空'}],\n      email: [{required: true,trigger:'blur',message: '邮箱格式不能为空'},{type: 'email',trigger: 'blur',message: '邮箱格式不正确'}]\n    }\n    // 添加管理员\n    function addAdmin(){\n      addAdminFormRef.value.validate(isValid=>{\n        if(isValid){\n          addAdminApi(markRaw(addAdminForm))\n            .then(res=>{\n              ElMessage({type: 'success',message: res.message,duration: 5000,showClose: true})\n              getAdminList()\n              addAdminDialogVisible.value = false\n            })\n\n        }\n      })\n    }\n\n    return {\n      pagination,pageChange,\n      adminList,\n      addAdminDialogVisible,openAddAdminDialog,addAdminDialogClosed,\n      addAdminForm,addAdminFormRef,addAdminFormRules,addAdmin\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.ManageAdmin{\n  padding: 20px 30px 30px 20px;\n}\n</style>\n"]}]}