{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBorrower\\index.vue?vue&type=style&index=0&id=3f2e8624&scoped=true&lang=scss","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBorrower\\index.vue","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1749726397077},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1749726394932},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1749726394615},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1749726393347},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ib3Jyb3dlckxpc3R7CiAgcGFkZGluZzogMjBweCAzMHB4IDIwcHggMzBweDsKICAuZWwtdGFibGV7CiAgICAub3BlcmF0aW9uewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgPip7CiAgICAgICAgbWFyZ2luOiAwIDJweCAxMHB4IDJweDsKICAgICAgfQogICAgfQogIH0KICAuZWwtcGFnaW5hdGlvbnsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgfQp9Cg=="},{"version":3,"sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBorrower\\index.vue"],"names":[],"mappings":";AA0GA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC;QACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACxB;IACF;EACF;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAClB;AACF","file":"D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/views/admin/ManageBorrower/index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"borrowerList\">\n    <el-table :data=\"borrowerList\" border stripe highlight-current-row table-layout=\"auto\">\n      <el-table-column label=\"序号\" align=\"center\">\n        <template #default=\"{$index}\">{{$index + 1 + (pagination.current - 1) * pagination.limit}}</template>\n      </el-table-column>\n      <el-table-column label=\"用户ID\" prop=\"id\"></el-table-column>\n      <el-table-column label=\"用户名\" prop=\"username\"></el-table-column>\n      <el-table-column label=\"联系方式\" prop=\"email\"></el-table-column>\n      <el-table-column label=\"已借阅数量\" prop=\"borrowedNum\"></el-table-column>\n      <el-table-column label=\"最大借阅数量\" prop=\"borrowMaxNum\"></el-table-column>\n      <el-table-column label=\"用户状态\" prop=\"description\"></el-table-column>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template #default=\"{row}\">\n          <el-button @click=\"openDialog(row)\">编辑最大借阅数量</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        background layout=\"total, prev, pager, next\"\n        :total=\"pagination.total\"\n        :page-size=\"pagination.limit\"\n        v-model:current-page=\"pagination.current\"\n        @current-change=\"pageChange\"/>\n\n    <el-dialog title=\"编辑最大借阅数量\" v-model=\"dialogVisible\">\n      <template #footer>\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"updateBorrowMaxNum\">确定</el-button>\n      </template>\n      <div style=\"font-weight: bold\">\n        <div style=\"margin-bottom: 10px;\">当前用户已借阅的数量：{{borrowerResource.borrowedNum}}</div>\n        <div>\n          <span>最大借阅数量：</span>\n          <el-input-number :min=\"borrowerResource.borrowedNum\" v-model=\"borrowerResource.borrowMaxNum\" size=\"small\"></el-input-number>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {onBeforeMount, shallowReactive, shallowRef} from \"vue\";\nimport {getPageBorrowerInfoApi,updateBorrowMaxNumApi} from \"@/api/admin\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"ManageBorrower\",\n  setup(){\n    // 分页信息\n    const pagination = shallowReactive({\n      current: 1,\n      limit: 10,\n      total: 0\n    })\n    function pageChange(){\n      getBorrowerList()\n    }\n\n    // 借阅者信息\n    const borrowerList = shallowReactive([])\n    function getBorrowerList(){\n      borrowerList.splice(0,borrowerList.length)\n      getPageBorrowerInfoApi(pagination.current,pagination.limit)\n        .then(res=>{\n          borrowerList.push(...res.data.records)\n          pagination.total = res.data.total\n        })\n    }\n    onBeforeMount(()=>{\n      getBorrowerList()\n    })\n\n    // 修改借阅者的最大借阅数量\n    const dialogVisible = shallowRef(false)\n    const borrowerResource = shallowReactive({\n      borrowMaxNum: 0,\n      borrowedNum: 0,\n      borrowerId: ''\n    })\n    function openDialog(borrowerInfo){\n      borrowerResource.borrowerId = borrowerInfo.id\n      borrowerResource.borrowedNum = borrowerInfo.borrowedNum\n      borrowerResource.borrowMaxNum = borrowerInfo.borrowMaxNum\n\n      dialogVisible.value = true\n    }\n    function updateBorrowMaxNum(){\n      updateBorrowMaxNumApi(borrowerResource.borrowerId,borrowerResource.borrowMaxNum)\n        .then(res=>{\n          ElMessage({type: 'success',message: res.message,duration: 5000,showClose:true})\n          getBorrowerList()\n          dialogVisible.value = false\n        })\n    }\n\n    return {\n      pagination,pageChange,\n      borrowerList,\n      dialogVisible,borrowerResource,openDialog,updateBorrowMaxNum\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.borrowerList{\n  padding: 20px 30px 20px 30px;\n  .el-table{\n    .operation{\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      >*{\n        margin: 0 2px 10px 2px;\n      }\n    }\n  }\n  .el-pagination{\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}