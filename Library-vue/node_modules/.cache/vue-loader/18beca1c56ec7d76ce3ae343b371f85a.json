{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookBorrow\\index.vue?vue&type=style&index=0&id=6901e640&scoped=true&lang=scss","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookBorrow\\index.vue","mtime":1749746725393},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1749726397077},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1749726394932},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1749726394615},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1749726393347},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5NYW5hZ2VCb29rQm9ycm93ewogIHBhZGRpbmc6IDIwcHggMzBweCAzMHB4IDIwcHg7CiAgLmVsLXRhYmxlewogICAgLm9wZXJhdGlvbnsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgID4qewogICAgICAgIG1hcmdpbjogMCAycHggMTBweCAycHg7CiAgICAgIH0KICAgIH0KICB9CiAgLmVsLXBhZ2luYXRpb257CiAgICBtYXJnaW4tdG9wOiAyMHB4OwogIH0KfQo="},{"version":3,"sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookBorrow\\index.vue"],"names":[],"mappings":";AAuGA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC;QACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACxB;IACF;EACF;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAClB;AACF","file":"D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/views/admin/ManageBookBorrow/index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"ManageBookBorrow\">\n    <!-- 主要赋值催还图书的模块    -->\n    <el-table :data=\"borrowList\" border stripe highlight-current-row table-layout=\"auto\">\n      <el-table-column label=\"序号\" fixed=\"left\" align=\"center\">\n        <template #default=\"{$index}\">{{$index + 1 + (pagination.current - 1) * pagination.limit}}</template>\n      </el-table-column>\n      <el-table-column label=\"订单号\" prop=\"id\" align=\"center\"></el-table-column>\n      <el-table-column label=\"图书名称\" prop=\"bookName\" align=\"center\"></el-table-column>\n      <el-table-column label=\"借阅者名称\" prop=\"username\" align=\"center\"></el-table-column>\n      <el-table-column label=\"借阅日期\" prop=\"borrowBookDate\" align=\"center\"></el-table-column>\n      <el-table-column label=\"预期还书日期\" prop=\"returnBookDate\" align=\"center\"></el-table-column>\n      <el-table-column label=\"借阅时长(天)\" prop=\"borrowTime\" align=\"center\"></el-table-column>\n      <el-table-column label=\"订单完成时间\" align=\"center\">\n        <template #default=\"{row}\">\n          <div v-if=\"row.endDate\">{{row.endDate}}</div>\n          <div v-else>未完成</div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"订单状态\" prop=\"description\" align=\"center\"></el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" align=\"center\" width=\"120px\">\n        <template #default=\"{row}\">\n          <div class=\"operation\">\n            <el-popconfirm title=\"确认催还图书？\" v-if=\"row.status !== 2\" @confirm=\"sendNotify(row.id)\">\n              <template #reference>\n                <el-button type=\"primary\">催还图书</el-button>\n              </template>\n            </el-popconfirm>\n            <el-button @click=\"toBookDetailPage(row.bookId)\">查看图书</el-button>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        background layout=\"total, prev, pager, next\"\n        :total=\"pagination.total\"\n        :page-size=\"pagination.limit\"\n        v-model:current-page=\"pagination.current\"\n        @current-change=\"pageChange\"/>\n  </div>\n</template>\n\n<script>\nimport {getPageBorrowBookDetailApi, recallBookReturnNotifyApi} from '@/api/admin'\nimport {onBeforeMount, shallowReactive} from \"vue\";\nimport {useRouter} from \"vue-router\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"ManageBookBorrow\",\n  setup(){\n    const pagination = shallowReactive({\n      limit: 10,\n      current: 1,\n      total: 0\n    })\n    function pageChange(){\n      getBorrowList()\n    }\n\n    // 借阅信息列表\n    const borrowList = shallowReactive([])\n    function getBorrowList(){\n      borrowList.splice(0,borrowList.length)\n      getPageBorrowBookDetailApi(pagination.current,pagination.limit)\n        .then(res=>{\n          borrowList.push(...res.data.records)\n          pagination.total = res.data.total\n        })\n    }\n    onBeforeMount(()=>{\n      getBorrowList()\n    })\n\n    // 去往图书详情界面\n    const router = useRouter()\n    function toBookDetailPage(bookId){\n      router.push({\n        name: 'BookDetail',\n        params:{\n          bookId: bookId\n        }\n      })\n    }\n\n    // 发送催还图书的通知\n    function sendNotify(borrowId){\n      recallBookReturnNotifyApi(borrowId)\n        .then(res=>{\n          ElMessage({type: 'success',duration: 5000,showClose: true,message: res.message})\n        })\n    }\n\n    return {\n      pagination,pageChange,\n      borrowList,\n      toBookDetailPage,sendNotify\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.ManageBookBorrow{\n  padding: 20px 30px 30px 20px;\n  .el-table{\n    .operation{\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      >*{\n        margin: 0 2px 10px 2px;\n      }\n    }\n  }\n  .el-pagination{\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}