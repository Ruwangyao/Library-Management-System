{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookBorrow\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookBorrow\\index.vue","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9cdTY4NENcdTk3NjIvXHU1MjREXHU3QUVGXHU0RUE0XHU0RTkyL2ZpbmFsL0xpYnJhcnlNYW5hZ2VtZW50U3lzdGVtLW1hc3Rlci9MaWJyYXJ5LXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgeyBnZXRQYWdlQm9ycm93Qm9va0RldGFpbEFwaSwgcmVjYWxsQm9va1JldHVybk5vdGlmeUFwaSB9IGZyb20gJ0AvYXBpL2FkbWluJzsKaW1wb3J0IHsgb25CZWZvcmVNb3VudCwgc2hhbGxvd1JlYWN0aXZlIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFuYWdlQm9va0JvcnJvdyIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHBhZ2luYXRpb24gPSBzaGFsbG93UmVhY3RpdmUoewogICAgICBsaW1pdDogMTAsCiAgICAgIGN1cnJlbnQ6IDEsCiAgICAgIHRvdGFsOiAwCiAgICB9KTsKCiAgICBmdW5jdGlvbiBwYWdlQ2hhbmdlKCkgewogICAgICBnZXRCb3Jyb3dMaXN0KCk7CiAgICB9IC8vIOWAn+mYheS/oeaBr+WIl+ihqAoKCiAgICB2YXIgYm9ycm93TGlzdCA9IHNoYWxsb3dSZWFjdGl2ZShbXSk7CgogICAgZnVuY3Rpb24gZ2V0Qm9ycm93TGlzdCgpIHsKICAgICAgYm9ycm93TGlzdC5zcGxpY2UoMCwgYm9ycm93TGlzdC5sZW5ndGgpOwogICAgICBnZXRQYWdlQm9ycm93Qm9va0RldGFpbEFwaShwYWdpbmF0aW9uLmN1cnJlbnQsIHBhZ2luYXRpb24ubGltaXQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGJvcnJvd0xpc3QucHVzaC5hcHBseShib3Jyb3dMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkocmVzLmRhdGEucmVjb3JkcykpOwogICAgICAgIHBhZ2luYXRpb24udG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9CgogICAgb25CZWZvcmVNb3VudChmdW5jdGlvbiAoKSB7CiAgICAgIGdldEJvcnJvd0xpc3QoKTsKICAgIH0pOyAvLyDljrvlvoDlm77kuabor6bmg4XnlYzpnaIKCiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogICAgZnVuY3Rpb24gdG9Cb29rRGV0YWlsUGFnZShib29rSWQpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdCb29rRGV0YWlsJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGJvb2tJZDogYm9va0lkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0gLy8g5Y+R6YCB5YKs6L+Y5Zu+5Lmm55qE6YCa55+lCgoKICAgIGZ1bmN0aW9uIHNlbmROb3RpZnkoYm9ycm93SWQpIHsKICAgICAgcmVjYWxsQm9va1JldHVybk5vdGlmeUFwaShib3Jyb3dJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgcGFnaW5hdGlvbjogcGFnaW5hdGlvbiwKICAgICAgcGFnZUNoYW5nZTogcGFnZUNoYW5nZSwKICAgICAgYm9ycm93TGlzdDogYm9ycm93TGlzdCwKICAgICAgdG9Cb29rRGV0YWlsUGFnZTogdG9Cb29rRGV0YWlsUGFnZSwKICAgICAgc2VuZE5vdGlmeTogc2VuZE5vdGlmeQogICAgfTsKICB9Cn07"},{"version":3,"mappings":";;AA2CA,SAAQA,0BAAR,EAAoCC,yBAApC,QAAoE,aAApE;AACA,SAAQC,aAAR,EAAuBC,eAAvB,QAA6C,KAA7C;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,SAAQC,SAAR,QAAwB,cAAxB;AAEA,eAAe;EACbC,IAAI,EAAE,kBADO;EAEbC,KAFa,mBAEN;IACL,IAAMC,UAAS,GAAIL,eAAe,CAAC;MACjCM,KAAK,EAAE,EAD0B;MAEjCC,OAAO,EAAE,CAFwB;MAGjCC,KAAK,EAAE;IAH0B,CAAD,CAAlC;;IAKA,SAASC,UAAT,GAAqB;MACnBC,aAAa;IACf,CARK,CAUL;;;IACA,IAAMC,UAAS,GAAIX,eAAe,CAAC,EAAD,CAAlC;;IACA,SAASU,aAAT,GAAwB;MACtBC,UAAU,CAACC,MAAX,CAAkB,CAAlB,EAAoBD,UAAU,CAACE,MAA/B;MACAhB,0BAA0B,CAACQ,UAAU,CAACE,OAAZ,EAAoBF,UAAU,CAACC,KAA/B,CAA1B,CACGQ,IADH,CACQ,aAAG,EAAE;QACTH,UAAU,CAACI,IAAX,iBAAU,qBAASC,GAAG,CAACC,IAAJ,CAASC,OAAlB,EAAV;QACAb,UAAU,CAACG,KAAX,GAAmBQ,GAAG,CAACC,IAAJ,CAAST,KAA5B;MACD,CAJH;IAKF;;IACAT,aAAa,CAAC,YAAI;MAChBW,aAAa;IACd,CAFY,CAAb,CApBK,CAwBL;;IACA,IAAMS,MAAK,GAAIlB,SAAS,EAAxB;;IACA,SAASmB,gBAAT,CAA0BC,MAA1B,EAAiC;MAC/BF,MAAM,CAACJ,IAAP,CAAY;QACVZ,IAAI,EAAE,YADI;QAEVmB,MAAM,EAAC;UACLD,MAAM,EAAEA;QADH;MAFG,CAAZ;IAMF,CAjCK,CAmCL;;;IACA,SAASE,UAAT,CAAoBC,QAApB,EAA6B;MAC3B1B,yBAAyB,CAAC0B,QAAD,CAAzB,CACGV,IADH,CACQ,aAAG,EAAE;QACTZ,SAAS,CAAC;UAACuB,IAAI,EAAE,SAAP;UAAiBC,QAAQ,EAAE,IAA3B;UAAgCC,SAAS,EAAE,IAA3C;UAAgDC,OAAO,EAAEZ,GAAG,CAACY;QAA7D,CAAD,CAAT;MACD,CAHH;IAIF;;IAEA,OAAO;MACLvB,UAAU,EAAVA,UADK;MACMI,UAAU,EAAVA,UADN;MAELE,UAAU,EAAVA,UAFK;MAGLS,gBAAgB,EAAhBA,gBAHK;MAGYG,UAAS,EAATA;IAHZ,CAAP;EAKF;AAlDa,CAAf","names":["getPageBorrowBookDetailApi","recallBookReturnNotifyApi","onBeforeMount","shallowReactive","useRouter","ElMessage","name","setup","pagination","limit","current","total","pageChange","getBorrowList","borrowList","splice","length","then","push","res","data","records","router","toBookDetailPage","bookId","params","sendNotify","borrowId","type","duration","showClose","message"],"sourceRoot":"","sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookBorrow\\index.vue"],"sourcesContent":["<template>\n  <div class=\"ManageBookBorrow\">\n    <!-- 主要赋值催还图书的模块    -->\n    <el-table :data=\"borrowList\" border stripe highlight-current-row table-layout=\"auto\">\n      <el-table-column label=\"序号\" fixed=\"left\" align=\"center\">\n        <template #default=\"{$index}\">{{$index + 1 + (pagination.current - 1) * pagination.limit}}</template>\n      </el-table-column>\n      <el-table-column label=\"订单号\" prop=\"id\" align=\"center\"></el-table-column>\n      <el-table-column label=\"图书名称\" prop=\"bookName\" align=\"center\"></el-table-column>\n      <el-table-column label=\"借阅者名称\" prop=\"username\" align=\"center\"></el-table-column>\n      <el-table-column label=\"借阅日期\" prop=\"borrowBookDate\" align=\"center\"></el-table-column>\n      <el-table-column label=\"预期还书日期\" prop=\"returnBookDate\" align=\"center\"></el-table-column>\n      <el-table-column label=\"借阅时长(天)\" prop=\"borrowTime\" align=\"center\"></el-table-column>\n      <el-table-column label=\"订单完成时间\" align=\"center\">\n        <template #default=\"{row}\">\n          <div v-if=\"row.endDate\">{{row.endDate}}</div>\n          <div v-else>未完成</div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"订单状态\" prop=\"description\" align=\"center\"></el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" align=\"center\" width=\"120px\">\n        <template #default=\"{row}\">\n          <div class=\"operation\">\n            <el-popconfirm title=\"确认催还图书？\" v-if=\"row.status !== 2\" @confirm=\"sendNotify(row.id)\">\n              <template #reference>\n                <el-button type=\"primary\">催还图书</el-button>\n              </template>\n            </el-popconfirm>\n            <el-button @click=\"toBookDetailPage(row.bookId)\">查看图书</el-button>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        background layout=\"total, prev, pager, next\"\n        :total=\"pagination.total\"\n        :page-size=\"pagination.limit\"\n        v-model:current-page=\"pagination.current\"\n        @current-change=\"pageChange\"/>\n  </div>\n</template>\n\n<script>\nimport {getPageBorrowBookDetailApi, recallBookReturnNotifyApi} from '@/api/admin'\nimport {onBeforeMount, shallowReactive} from \"vue\";\nimport {useRouter} from \"vue-router\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"ManageBookBorrow\",\n  setup(){\n    const pagination = shallowReactive({\n      limit: 10,\n      current: 1,\n      total: 0\n    })\n    function pageChange(){\n      getBorrowList()\n    }\n\n    // 借阅信息列表\n    const borrowList = shallowReactive([])\n    function getBorrowList(){\n      borrowList.splice(0,borrowList.length)\n      getPageBorrowBookDetailApi(pagination.current,pagination.limit)\n        .then(res=>{\n          borrowList.push(...res.data.records)\n          pagination.total = res.data.total\n        })\n    }\n    onBeforeMount(()=>{\n      getBorrowList()\n    })\n\n    // 去往图书详情界面\n    const router = useRouter()\n    function toBookDetailPage(bookId){\n      router.push({\n        name: 'BookDetail',\n        params:{\n          bookId: bookId\n        }\n      })\n    }\n\n    // 发送催还图书的通知\n    function sendNotify(borrowId){\n      recallBookReturnNotifyApi(borrowId)\n        .then(res=>{\n          ElMessage({type: 'success',duration: 5000,showClose: true,message: res.message})\n        })\n    }\n\n    return {\n      pagination,pageChange,\n      borrowList,\n      toBookDetailPage,sendNotify\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.ManageBookBorrow{\n  padding: 20px 30px 30px 20px;\n  .el-table{\n    .operation{\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      >*{\n        margin: 0 2px 10px 2px;\n      }\n    }\n  }\n}\n</style>\n"]}]}