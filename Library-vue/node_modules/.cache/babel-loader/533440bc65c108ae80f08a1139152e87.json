{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\router\\permission.js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\router\\permission.js","mtime":1749729555480},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js","mtime":1749726396308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovXHU2ODRDXHU5NzYyL1x1NTI0RFx1N0FFRlx1NEVBNFx1NEU5Mi9maW5hbC9MaWJyYXJ5TWFuYWdlbWVudFN5c3RlbS1tYXN0ZXIvTGlicmFyeS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovXHU2ODRDXHU5NzYyL1x1NTI0RFx1N0FFRlx1NEVBNFx1NEU5Mi9maW5hbC9MaWJyYXJ5TWFuYWdlbWVudFN5c3RlbS1tYXN0ZXIvTGlicmFyeS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIvaW5kZXgiOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsgLy8g5LiN6ZyA6KaB6YeN5a6a5ZCR55qE55m95ZCN5Y2VCgp2YXIgd2hpdGVMaXN0ID0gWycvbG9naW4nXTsKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBoYXNUb2tlbjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgICAgICAgICAgIGhhc1Rva2VuID0gZ2V0VG9rZW4oKTsKCiAgICAgICAgICAgIGlmICghaGFzVG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHRvLnBhdGggPT09ICcvbG9naW4nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpZiAoIXN0b3JlLmdldHRlcnNbJ3VzZXJJbmZvL2hhc0dldFVzZXJJbmZvJ10pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOW3sue7j+iOt+WPluS6hueUqOaIt+eahOadg+mZkOS/oeaBr++8jOS9huaYr+i3r+eUseS4jeWtmOWcqOeahOaDheWGteS4i+i3s+i9rOWIsOmmlumhtQogICAgICAgICAgICBpZiAodG8ubWF0Y2hlZC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIOato+W4uOaDheWGteS4i+ebtOaOpei3s+i9rAogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VySW5mby9nZXRVc2VySW5mbycpOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE4OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEyKTsKICAgICAgICAgICAgLy8g6I635Y+W55So5oi35L+h5oGv5aSx6LSl5YiZ6YeN572u55So5oi35L+h5oGvCiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VySW5mby9yZXNldFVzZXJJbmZvJyk7CiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIHBhdGg6ICIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAvLyDmsqHmnIl0b2tlbgogICAgICAgICAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgLy8gaW4gdGhlIGZyZWUgbG9naW4gd2hpdGVsaXN0LCBnbyBkaXJlY3RseQogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBvdGhlciBwYWdlcyB0aGF0IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIGFyZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBwYWdlLgogICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VySW5mby9yZXNldFVzZXJJbmZvJyk7CiAgICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgICBwYXRoOiAiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxMiwgMThdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLmRvbmUoKTsKfSk7"},{"version":3,"names":["NProgress","router","getToken","store","whiteList","beforeEach","to","from","next","start","hasToken","path","done","getters","matched","length","dispatch","replace","indexOf","afterEach"],"sources":["D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/router/permission.js"],"sourcesContent":["import NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\nimport router from \"@/router/index\"\nimport {getToken} from \"@/utils/auth\"\nimport store from '@/store'\n\n// 不需要重定向的白名单\nconst whiteList = ['/login']\n\nrouter.beforeEach(async (to,from,next)=>{\n  NProgress.start()\n  const hasToken = getToken()\n  if(hasToken){\n    if(to.path === '/login'){\n      next({path: '/'})\n      NProgress.done()\n    }else{\n      if(store.getters['userInfo/hasGetUserInfo']){\n        // 已经获取了用户的权限信息，但是路由不存在的情况下跳转到首页\n        if(to.matched.length === 0){\n          next({path: '/'})\n        }else {\n          // 正常情况下直接跳转\n          next()\n        }\n      }else{\n        try {\n          // 获取用户信息和权限,动态生成了路由\n          await store.dispatch('userInfo/getUserInfo')\n          next({ ...to, replace: true })\n        }catch (error){\n          // 获取用户信息失败则重置用户信息\n          store.dispatch('userInfo/resetUserInfo')\n          next({path: `/login?redirect=${to.path}`})\n          NProgress.done()\n        }\n      }\n    }\n  }else{\n    // 没有token\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      next()\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      store.dispatch('userInfo/resetUserInfo')\n      next({path: `/login?redirect=${to.path}`})\n      NProgress.done()\n    }\n  }\n})\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done()\n})"],"mappings":";;;AAAA,OAAOA,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,SAAQC,QAAR,QAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CAEA;;AACA,IAAMC,SAAS,GAAG,CAAC,QAAD,CAAlB;AAEAH,MAAM,CAACI,UAAP;EAAA,mEAAkB,iBAAOC,EAAP,EAAUC,IAAV,EAAeC,IAAf;IAAA;IAAA;MAAA;QAAA;UAAA;YAChBR,SAAS,CAACS,KAAV;YACMC,QAFU,GAECR,QAAQ,EAFT;;YAAA,KAGbQ,QAHa;cAAA;cAAA;YAAA;;YAAA,MAIXJ,EAAE,CAACK,IAAH,KAAY,QAJD;cAAA;cAAA;YAAA;;YAKZH,IAAI,CAAC;cAACG,IAAI,EAAE;YAAP,CAAD,CAAJ;YACAX,SAAS,CAACY,IAAV;YANY;YAAA;;UAAA;YAAA,KAQTT,KAAK,CAACU,OAAN,CAAc,yBAAd,CARS;cAAA;cAAA;YAAA;;YASV;YACA,IAAGP,EAAE,CAACQ,OAAH,CAAWC,MAAX,KAAsB,CAAzB,EAA2B;cACzBP,IAAI,CAAC;gBAACG,IAAI,EAAE;cAAP,CAAD,CAAJ;YACD,CAFD,MAEM;cACJ;cACAH,IAAI;YACL;;YAfS;YAAA;;UAAA;YAAA;YAAA;YAAA,OAmBFL,KAAK,CAACa,QAAN,CAAe,sBAAf,CAnBE;;UAAA;YAoBRR,IAAI,iCAAMF,EAAN;cAAUW,OAAO,EAAE;YAAnB,GAAJ;YApBQ;YAAA;;UAAA;YAAA;YAAA;YAsBR;YACAd,KAAK,CAACa,QAAN,CAAe,wBAAf;YACAR,IAAI,CAAC;cAACG,IAAI,4BAAqBL,EAAE,CAACK,IAAxB;YAAL,CAAD,CAAJ;YACAX,SAAS,CAACY,IAAV;;UAzBQ;YAAA;YAAA;;UAAA;YA8Bd;YACA,IAAIR,SAAS,CAACc,OAAV,CAAkBZ,EAAE,CAACK,IAArB,MAA+B,CAAC,CAApC,EAAuC;cACrC;cACAH,IAAI;YACL,CAHD,MAGO;cACL;cACAL,KAAK,CAACa,QAAN,CAAe,wBAAf;cACAR,IAAI,CAAC;gBAACG,IAAI,4BAAqBL,EAAE,CAACK,IAAxB;cAAL,CAAD,CAAJ;cACAX,SAAS,CAACY,IAAV;YACD;;UAvCa;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAlB;;EAAA;IAAA;EAAA;AAAA;AA0CAX,MAAM,CAACkB,SAAP,CAAiB,YAAM;EACrB;EACAnB,SAAS,CAACY,IAAV;AACD,CAHD"}]}