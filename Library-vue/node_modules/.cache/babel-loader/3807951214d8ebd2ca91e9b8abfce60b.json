{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookReserve\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookReserve\\index.vue","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1750002481133},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9cdTY4NENcdTk3NjIvXHU1MjREXHU3QUVGXHU0RUE0XHU0RTkyL2ZpbmFsL0xpYnJhcnlNYW5hZ2VtZW50U3lzdGVtLW1hc3Rlci9MaWJyYXJ5LXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgeyBvbkJlZm9yZU1vdW50LCBzaGFsbG93UmVhY3RpdmUgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBhZGRCb29rU3RvY2tBcGksIGdldFBhZ2VSZXNlcnZlQm9va0RldGFpbEFwaSB9IGZyb20gIkAvYXBpL2FkbWluIjsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFuYWdlQm9va1Jlc2VydmUiLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBwYWdpbmF0aW9uID0gc2hhbGxvd1JlYWN0aXZlKHsKICAgICAgY3VycmVudDogMSwKICAgICAgbGltaXQ6IDUsCiAgICAgIHRvdGFsOiAwCiAgICB9KTsKCiAgICBmdW5jdGlvbiBwYWdlQ2hhbmdlKCkgewogICAgICBnZXRSZXNlcnZlTGlzdCgpOwogICAgfQoKICAgIHZhciByZXNlcnZlTGlzdCA9IHNoYWxsb3dSZWFjdGl2ZShbXSk7CgogICAgZnVuY3Rpb24gZ2V0UmVzZXJ2ZUxpc3QoKSB7CiAgICAgIHJlc2VydmVMaXN0LnNwbGljZSgwLCByZXNlcnZlTGlzdC5sZW5ndGgpOwogICAgICBnZXRQYWdlUmVzZXJ2ZUJvb2tEZXRhaWxBcGkocGFnaW5hdGlvbi5jdXJyZW50LCBwYWdpbmF0aW9uLmxpbWl0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXNlcnZlTGlzdC5wdXNoLmFwcGx5KHJlc2VydmVMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkocmVzLmRhdGEucmVjb3JkcykpOwogICAgICAgIHBhZ2luYXRpb24udG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9CgogICAgb25CZWZvcmVNb3VudChmdW5jdGlvbiAoKSB7CiAgICAgIGdldFJlc2VydmVMaXN0KCk7CiAgICB9KTsgLy8g5Y675b6A5Zu+5Lmm6K+m5oOF55WM6Z2iCgogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwoKICAgIGZ1bmN0aW9uIHRvQm9va0RldGFpbFBhZ2UoYm9va0lkKSB7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnQm9va0RldGFpbCcsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBib29rSWQ6IGJvb2tJZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9IC8vIOa3u+WKoOW6k+WtmAoKCiAgICB2YXIgYWRkQm9va0luZm8gPSBzaGFsbG93UmVhY3RpdmUoewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBib29rSWQ6IG51bGwsCiAgICAgIGFkZE51bTogbnVsbAogICAgfSk7CgogICAgZnVuY3Rpb24gb3BlbkFkZEJvb2tEaWFsb2coYm9va0lkKSB7CiAgICAgIGFkZEJvb2tJbmZvLmJvb2tJZCA9IGJvb2tJZDsKICAgICAgYWRkQm9va0luZm8uYWRkTnVtID0gMTsKICAgICAgYWRkQm9va0luZm8uZGlhbG9nID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRCb29rRGlhbG9nQ2xvc2VkKCkgewogICAgICBhZGRCb29rSW5mby5hZGROdW0gPSBudWxsOwogICAgICBhZGRCb29rSW5mby5kaWFsb2cgPSBmYWxzZTsKICAgICAgYWRkQm9va0luZm8uYm9va0lkID0gbnVsbDsKICAgIH0gLy8g5re75Yqg5bqT5a2YCgoKICAgIGZ1bmN0aW9uIGFkZEJvb2tTdG9jaygpIHsKICAgICAgYWRkQm9va1N0b2NrQXBpKGFkZEJvb2tJbmZvLmJvb2tJZCwgYWRkQm9va0luZm8uYWRkTnVtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgZHVyYXRpb246IDUwMDAsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZQogICAgICAgIH0pOyAvLyDliLfmlrDliJfooagKCiAgICAgICAgZ2V0UmVzZXJ2ZUxpc3QoKTsgLy8g5YWz6Zet5a+56K+d5qGGCgogICAgICAgIGFkZEJvb2tJbmZvLmRpYWxvZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLAogICAgICBwYWdlQ2hhbmdlOiBwYWdlQ2hhbmdlLAogICAgICByZXNlcnZlTGlzdDogcmVzZXJ2ZUxpc3QsCiAgICAgIHRvQm9va0RldGFpbFBhZ2U6IHRvQm9va0RldGFpbFBhZ2UsCiAgICAgIGFkZEJvb2tJbmZvOiBhZGRCb29rSW5mbywKICAgICAgYWRkQm9va1N0b2NrOiBhZGRCb29rU3RvY2ssCiAgICAgIGFkZEJvb2tEaWFsb2dDbG9zZWQ6IGFkZEJvb2tEaWFsb2dDbG9zZWQsCiAgICAgIG9wZW5BZGRCb29rRGlhbG9nOiBvcGVuQWRkQm9va0RpYWxvZwogICAgfTsKICB9Cn07"},{"version":3,"mappings":";;AAiDA,SAAQA,aAAR,EAAuBC,eAAvB,QAA6C,KAA7C;AACA,SAAQC,eAAR,EAAyBC,2BAAzB,QAA2D,aAA3D;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,SAAQC,SAAR,QAAwB,cAAxB;AAEA,eAAe;EACbC,IAAI,EAAE,mBADO;EAEbC,KAFa,mBAEN;IACL,IAAMC,UAAS,GAAIP,eAAe,CAAC;MACjCQ,OAAO,EAAE,CADwB;MAEjCC,KAAK,EAAE,CAF0B;MAGjCC,KAAK,EAAE;IAH0B,CAAD,CAAlC;;IAKA,SAASC,UAAT,GAAqB;MACnBC,cAAc;IAChB;;IAEA,IAAMC,WAAU,GAAIb,eAAe,CAAC,EAAD,CAAnC;;IACA,SAASY,cAAT,GAAyB;MACvBC,WAAW,CAACC,MAAZ,CAAmB,CAAnB,EAAqBD,WAAW,CAACE,MAAjC;MACAb,2BAA2B,CAACK,UAAU,CAACC,OAAZ,EAAoBD,UAAU,CAACE,KAA/B,CAA3B,CACGO,IADH,CACQ,aAAG,EAAE;QACTH,WAAW,CAACI,IAAZ,kBAAW,qBAASC,GAAG,CAACC,IAAJ,CAASC,OAAlB,EAAX;QACAb,UAAU,CAACG,KAAX,GAAmBQ,GAAG,CAACC,IAAJ,CAAST,KAA5B;MACD,CAJH;IAKF;;IACAX,aAAa,CAAC,YAAI;MAChBa,cAAc;IACf,CAFY,CAAb,CAnBK,CAuBL;;IACA,IAAMS,MAAK,GAAIlB,SAAS,EAAxB;;IACA,SAASmB,gBAAT,CAA0BC,MAA1B,EAAiC;MAC/BF,MAAM,CAACJ,IAAP,CAAY;QACVZ,IAAI,EAAE,YADI;QAEVmB,MAAM,EAAC;UACLD,MAAM,EAAEA;QADH;MAFG,CAAZ;IAMF,CAhCK,CAiCL;;;IACA,IAAME,WAAU,GAAIzB,eAAe,CAAC;MAClC0B,MAAM,EAAE,KAD0B;MAElCH,MAAM,EAAE,IAF0B;MAGlCI,MAAM,EAAE;IAH0B,CAAD,CAAnC;;IAKA,SAASC,iBAAT,CAA2BL,MAA3B,EAAkC;MAChCE,WAAW,CAACF,MAAZ,GAAqBA,MAArB;MACAE,WAAW,CAACE,MAAZ,GAAqB,CAArB;MACAF,WAAW,CAACC,MAAZ,GAAqB,IAArB;IACF;;IACA,SAASG,mBAAT,GAA8B;MAC5BJ,WAAW,CAACE,MAAZ,GAAqB,IAArB;MACAF,WAAW,CAACC,MAAZ,GAAqB,KAArB;MACAD,WAAW,CAACF,MAAZ,GAAqB,IAArB;IACF,CAhDK,CAiDL;;;IACA,SAASO,YAAT,GAAuB;MACrB7B,eAAe,CAACwB,WAAW,CAACF,MAAb,EAAoBE,WAAW,CAACE,MAAhC,CAAf,CACKX,IADL,CACU,aAAG,EAAE;QACTZ,SAAS,CAAC;UAAC2B,IAAI,EAAE,SAAP;UAAiBC,QAAQ,EAAE,IAA3B;UAAgCC,SAAS,EAAE,IAA3C;UAAgDC,OAAO,EAAEhB,GAAG,CAACgB;QAA7D,CAAD,CAAT,CADS,CAET;;QACAtB,cAAc,GAHL,CAIT;;QACAa,WAAW,CAACC,MAAZ,GAAqB,KAArB;MACD,CAPL;IAQF;;IAEA,OAAO;MACLnB,UAAU,EAAVA,UADK;MACMI,UAAU,EAAVA,UADN;MAELE,WAAW,EAAXA,WAFK;MAGLS,gBAAgB,EAAhBA,gBAHK;MAILG,WAAW,EAAXA,WAJK;MAIOK,YAAY,EAAZA,YAJP;MAIoBD,mBAAmB,EAAnBA,mBAJpB;MAIwCD,iBAAgB,EAAhBA;IAJxC,CAAP;EAMF;AArEa,CAAf","names":["onBeforeMount","shallowReactive","addBookStockApi","getPageReserveBookDetailApi","useRouter","ElMessage","name","setup","pagination","current","limit","total","pageChange","getReserveList","reserveList","splice","length","then","push","res","data","records","router","toBookDetailPage","bookId","params","addBookInfo","dialog","addNum","openAddBookDialog","addBookDialogClosed","addBookStock","type","duration","showClose","message"],"sourceRoot":"","sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBookReserve\\index.vue"],"sourcesContent":["<template>\n  <div class=\"ManageBookReserve\">\n    <el-table :data=\"reserveList\" border stripe highlight-current-row table-layout=\"auto\" flexible>\n      <el-table-column label=\"序号\" fixed=\"left\" align=\"center\">\n        <template #default=\"{$index}\">{{$index + 1 + (pagination.current - 1) * pagination.limit}}</template>\n      </el-table-column>\n      <el-table-column label=\"订单号\" prop=\"id\" align=\"center\"></el-table-column>\n      <el-table-column label=\"预约用户\" prop=\"username\" align=\"center\"></el-table-column>\n      <el-table-column label=\"图书名称\" prop=\"bookName\" align=\"center\"></el-table-column>\n      <el-table-column label=\"预约时间\" prop=\"reserveTime\" align=\"center\"></el-table-column>\n      <el-table-column label=\"通知时间\" align=\"center\">\n        <template #default=\"{row}\">\n          <div v-if=\"row.notifyTime\">{{row.notifyTime}}</div>\n          <div v-else>暂未通知</div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"订单状态\" prop=\"description\" align=\"center\"></el-table-column>\n      <el-table-column label=\"图书库存数量\" prop=\"stockNum\" align=\"center\"></el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" align=\"center\" width=\"110px\">\n        <template #default=\"{row}\">\n          <div class=\"operation\">\n            <el-button v-if=\"row.status === 0 && row.stockNum === 0\" type=\"primary\" @click=\"openAddBookDialog(row.bookId)\">添加库存</el-button>\n            <el-button @click=\"toBookDetailPage(row.bookId)\">查看图书</el-button>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        background layout=\"total, prev, pager, next\"\n        :total=\"pagination.total\"\n        :page-size=\"pagination.limit\"\n        v-model:current-page=\"pagination.current\"\n        @current-change=\"pageChange\"/>\n\n    <el-dialog\n        v-model=\"addBookInfo.dialog\" title=\"添加图书库存\"\n        :draggable=\"true\" destroy-on-close\n        @closed=\"addBookDialogClosed\">\n      <template #footer>\n        <el-button @click=\"addBookInfo.dialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addBookStock\">确定</el-button>\n      </template>\n      添加库存的数量：<el-input-number v-model=\"addBookInfo.addNum\" :min=\"1\"></el-input-number>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport {onBeforeMount, shallowReactive} from \"vue\";\nimport {addBookStockApi, getPageReserveBookDetailApi} from \"@/api/admin\";\nimport {useRouter} from \"vue-router\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"ManageBookReserve\",\n  setup(){\n    const pagination = shallowReactive({\n      current: 1,\n      limit: 5,\n      total: 0\n    })\n    function pageChange(){\n      getReserveList()\n    }\n\n    const reserveList = shallowReactive([])\n    function getReserveList(){\n      reserveList.splice(0,reserveList.length)\n      getPageReserveBookDetailApi(pagination.current,pagination.limit)\n        .then(res=>{\n          reserveList.push(...res.data.records)\n          pagination.total = res.data.total\n        })\n    }\n    onBeforeMount(()=>{\n      getReserveList()\n    })\n\n    // 去往图书详情界面\n    const router = useRouter()\n    function toBookDetailPage(bookId){\n      router.push({\n        name: 'BookDetail',\n        params:{\n          bookId: bookId\n        }\n      })\n    }\n    // 添加库存\n    const addBookInfo = shallowReactive({\n      dialog: false,\n      bookId: null,\n      addNum: null\n    })\n    function openAddBookDialog(bookId){\n      addBookInfo.bookId = bookId\n      addBookInfo.addNum = 1\n      addBookInfo.dialog = true\n    }\n    function addBookDialogClosed(){\n      addBookInfo.addNum = null\n      addBookInfo.dialog = false\n      addBookInfo.bookId = null\n    }\n    // 添加库存\n    function addBookStock(){\n      addBookStockApi(addBookInfo.bookId,addBookInfo.addNum)\n          .then(res=>{\n            ElMessage({type: 'success',duration: 5000,showClose: true,message: res.message})\n            // 刷新列表\n            getReserveList()\n            // 关闭对话框\n            addBookInfo.dialog = false\n          })\n    }\n\n    return {\n      pagination,pageChange,\n      reserveList,\n      toBookDetailPage,\n      addBookInfo,addBookStock,addBookDialogClosed,openAddBookDialog\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.ManageBookReserve{\n  padding: 20px 30px 30px 20px;\n  .el-table{\n    .operation{\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      >*{\n        margin: 0 2px 10px 2px;\n      }\n    }\n  }\n  .el-pagination{\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}