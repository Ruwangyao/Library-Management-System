{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBorrower\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBorrower\\index.vue","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1750002481133},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1749726393897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9cdTY4NENcdTk3NjIvXHU1MjREXHU3QUVGXHU0RUE0XHU0RTkyL2ZpbmFsL0xpYnJhcnlNYW5hZ2VtZW50U3lzdGVtLW1hc3Rlci9MaWJyYXJ5LXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgeyBvbkJlZm9yZU1vdW50LCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBnZXRQYWdlQm9ycm93ZXJJbmZvQXBpLCB1cGRhdGVCb3Jyb3dNYXhOdW1BcGkgfSBmcm9tICJAL2FwaS9hZG1pbiI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFuYWdlQm9ycm93ZXIiLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIC8vIOWIhumhteS/oeaBrwogICAgdmFyIHBhZ2luYXRpb24gPSBzaGFsbG93UmVhY3RpdmUoewogICAgICBjdXJyZW50OiAxLAogICAgICBsaW1pdDogMTAsCiAgICAgIHRvdGFsOiAwCiAgICB9KTsKCiAgICBmdW5jdGlvbiBwYWdlQ2hhbmdlKCkgewogICAgICBnZXRCb3Jyb3dlckxpc3QoKTsKICAgIH0gLy8g5YCf6ZiF6ICF5L+h5oGvCgoKICAgIHZhciBib3Jyb3dlckxpc3QgPSBzaGFsbG93UmVhY3RpdmUoW10pOwoKICAgIGZ1bmN0aW9uIGdldEJvcnJvd2VyTGlzdCgpIHsKICAgICAgYm9ycm93ZXJMaXN0LnNwbGljZSgwLCBib3Jyb3dlckxpc3QubGVuZ3RoKTsKICAgICAgZ2V0UGFnZUJvcnJvd2VySW5mb0FwaShwYWdpbmF0aW9uLmN1cnJlbnQsIHBhZ2luYXRpb24ubGltaXQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGJvcnJvd2VyTGlzdC5wdXNoLmFwcGx5KGJvcnJvd2VyTGlzdCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLnJlY29yZHMpKTsKICAgICAgICBwYWdpbmF0aW9uLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgIH0pOwogICAgfQoKICAgIG9uQmVmb3JlTW91bnQoZnVuY3Rpb24gKCkgewogICAgICBnZXRCb3Jyb3dlckxpc3QoKTsKICAgIH0pOyAvLyDkv67mlLnlgJ/pmIXogIXnmoTmnIDlpKflgJ/pmIXmlbDph48KCiAgICB2YXIgZGlhbG9nVmlzaWJsZSA9IHNoYWxsb3dSZWYoZmFsc2UpOwogICAgdmFyIGJvcnJvd2VyUmVzb3VyY2UgPSBzaGFsbG93UmVhY3RpdmUoewogICAgICBib3Jyb3dNYXhOdW06IDAsCiAgICAgIGJvcnJvd2VkTnVtOiAwLAogICAgICBib3Jyb3dlcklkOiAnJwogICAgfSk7CgogICAgZnVuY3Rpb24gb3BlbkRpYWxvZyhib3Jyb3dlckluZm8pIHsKICAgICAgYm9ycm93ZXJSZXNvdXJjZS5ib3Jyb3dlcklkID0gYm9ycm93ZXJJbmZvLmlkOwogICAgICBib3Jyb3dlclJlc291cmNlLmJvcnJvd2VkTnVtID0gYm9ycm93ZXJJbmZvLmJvcnJvd2VkTnVtOwogICAgICBib3Jyb3dlclJlc291cmNlLmJvcnJvd01heE51bSA9IGJvcnJvd2VySW5mby5ib3Jyb3dNYXhOdW07CiAgICAgIGRpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUJvcnJvd01heE51bSgpIHsKICAgICAgdXBkYXRlQm9ycm93TWF4TnVtQXBpKGJvcnJvd2VyUmVzb3VyY2UuYm9ycm93ZXJJZCwgYm9ycm93ZXJSZXNvdXJjZS5ib3Jyb3dNYXhOdW0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwKICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgZ2V0Qm9ycm93ZXJMaXN0KCk7CiAgICAgICAgZGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLAogICAgICBwYWdlQ2hhbmdlOiBwYWdlQ2hhbmdlLAogICAgICBib3Jyb3dlckxpc3Q6IGJvcnJvd2VyTGlzdCwKICAgICAgZGlhbG9nVmlzaWJsZTogZGlhbG9nVmlzaWJsZSwKICAgICAgYm9ycm93ZXJSZXNvdXJjZTogYm9ycm93ZXJSZXNvdXJjZSwKICAgICAgb3BlbkRpYWxvZzogb3BlbkRpYWxvZywKICAgICAgdXBkYXRlQm9ycm93TWF4TnVtOiB1cGRhdGVCb3Jyb3dNYXhOdW0KICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;AA0CA,SAAQA,aAAR,EAAuBC,eAAvB,EAAwCC,UAAxC,QAAyD,KAAzD;AACA,SAAQC,sBAAR,EAA+BC,qBAA/B,QAA2D,aAA3D;AACA,SAAQC,SAAR,QAAwB,cAAxB;AAEA,eAAe;EACbC,IAAI,EAAE,gBADO;EAEbC,KAFa,mBAEN;IACL;IACA,IAAMC,UAAS,GAAIP,eAAe,CAAC;MACjCQ,OAAO,EAAE,CADwB;MAEjCC,KAAK,EAAE,EAF0B;MAGjCC,KAAK,EAAE;IAH0B,CAAD,CAAlC;;IAKA,SAASC,UAAT,GAAqB;MACnBC,eAAe;IACjB,CATK,CAWL;;;IACA,IAAMC,YAAW,GAAIb,eAAe,CAAC,EAAD,CAApC;;IACA,SAASY,eAAT,GAA0B;MACxBC,YAAY,CAACC,MAAb,CAAoB,CAApB,EAAsBD,YAAY,CAACE,MAAnC;MACAb,sBAAsB,CAACK,UAAU,CAACC,OAAZ,EAAoBD,UAAU,CAACE,KAA/B,CAAtB,CACGO,IADH,CACQ,aAAG,EAAE;QACTH,YAAY,CAACI,IAAb,mBAAY,qBAASC,GAAG,CAACC,IAAJ,CAASC,OAAlB,EAAZ;QACAb,UAAU,CAACG,KAAX,GAAmBQ,GAAG,CAACC,IAAJ,CAAST,KAA5B;MACD,CAJH;IAKF;;IACAX,aAAa,CAAC,YAAI;MAChBa,eAAe;IAChB,CAFY,CAAb,CArBK,CAyBL;;IACA,IAAMS,aAAY,GAAIpB,UAAU,CAAC,KAAD,CAAhC;IACA,IAAMqB,gBAAe,GAAItB,eAAe,CAAC;MACvCuB,YAAY,EAAE,CADyB;MAEvCC,WAAW,EAAE,CAF0B;MAGvCC,UAAU,EAAE;IAH2B,CAAD,CAAxC;;IAKA,SAASC,UAAT,CAAoBC,YAApB,EAAiC;MAC/BL,gBAAgB,CAACG,UAAjB,GAA8BE,YAAY,CAACC,EAA3C;MACAN,gBAAgB,CAACE,WAAjB,GAA+BG,YAAY,CAACH,WAA5C;MACAF,gBAAgB,CAACC,YAAjB,GAAgCI,YAAY,CAACJ,YAA7C;MAEAF,aAAa,CAACQ,KAAd,GAAsB,IAAtB;IACF;;IACA,SAASC,kBAAT,GAA6B;MAC3B3B,qBAAqB,CAACmB,gBAAgB,CAACG,UAAlB,EAA6BH,gBAAgB,CAACC,YAA9C,CAArB,CACGP,IADH,CACQ,aAAG,EAAE;QACTZ,SAAS,CAAC;UAAC2B,IAAI,EAAE,SAAP;UAAiBC,OAAO,EAAEd,GAAG,CAACc,OAA9B;UAAsCC,QAAQ,EAAE,IAAhD;UAAqDC,SAAS,EAAC;QAA/D,CAAD,CAAT;QACAtB,eAAe;QACfS,aAAa,CAACQ,KAAd,GAAsB,KAAtB;MACD,CALH;IAMF;;IAEA,OAAO;MACLtB,UAAU,EAAVA,UADK;MACMI,UAAU,EAAVA,UADN;MAELE,YAAY,EAAZA,YAFK;MAGLQ,aAAa,EAAbA,aAHK;MAGSC,gBAAgB,EAAhBA,gBAHT;MAG0BI,UAAU,EAAVA,UAH1B;MAGqCI,kBAAiB,EAAjBA;IAHrC,CAAP;EAKF;AAvDa,CAAf","names":["onBeforeMount","shallowReactive","shallowRef","getPageBorrowerInfoApi","updateBorrowMaxNumApi","ElMessage","name","setup","pagination","current","limit","total","pageChange","getBorrowerList","borrowerList","splice","length","then","push","res","data","records","dialogVisible","borrowerResource","borrowMaxNum","borrowedNum","borrowerId","openDialog","borrowerInfo","id","value","updateBorrowMaxNum","type","message","duration","showClose"],"sourceRoot":"","sources":["D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\views\\admin\\ManageBorrower\\index.vue"],"sourcesContent":["<template>\n  <div class=\"borrowerList\">\n    <el-table :data=\"borrowerList\" border stripe highlight-current-row table-layout=\"auto\">\n      <el-table-column label=\"序号\" align=\"center\">\n        <template #default=\"{$index}\">{{$index + 1 + (pagination.current - 1) * pagination.limit}}</template>\n      </el-table-column>\n      <el-table-column label=\"用户ID\" prop=\"id\"></el-table-column>\n      <el-table-column label=\"用户名\" prop=\"username\"></el-table-column>\n      <el-table-column label=\"联系方式\" prop=\"email\"></el-table-column>\n      <el-table-column label=\"已借阅数量\" prop=\"borrowedNum\"></el-table-column>\n      <el-table-column label=\"最大借阅数量\" prop=\"borrowMaxNum\"></el-table-column>\n      <el-table-column label=\"用户状态\" prop=\"description\"></el-table-column>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template #default=\"{row}\">\n          <el-button @click=\"openDialog(row)\">编辑最大借阅数量</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        background layout=\"total, prev, pager, next\"\n        :total=\"pagination.total\"\n        :page-size=\"pagination.limit\"\n        v-model:current-page=\"pagination.current\"\n        @current-change=\"pageChange\"/>\n\n    <el-dialog title=\"编辑最大借阅数量\" v-model=\"dialogVisible\">\n      <template #footer>\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"updateBorrowMaxNum\">确定</el-button>\n      </template>\n      <div style=\"font-weight: bold\">\n        <div style=\"margin-bottom: 10px;\">当前用户已借阅的数量：{{borrowerResource.borrowedNum}}</div>\n        <div>\n          <span>最大借阅数量：</span>\n          <el-input-number :min=\"borrowerResource.borrowedNum\" v-model=\"borrowerResource.borrowMaxNum\" size=\"small\"></el-input-number>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {onBeforeMount, shallowReactive, shallowRef} from \"vue\";\nimport {getPageBorrowerInfoApi,updateBorrowMaxNumApi} from \"@/api/admin\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"ManageBorrower\",\n  setup(){\n    // 分页信息\n    const pagination = shallowReactive({\n      current: 1,\n      limit: 10,\n      total: 0\n    })\n    function pageChange(){\n      getBorrowerList()\n    }\n\n    // 借阅者信息\n    const borrowerList = shallowReactive([])\n    function getBorrowerList(){\n      borrowerList.splice(0,borrowerList.length)\n      getPageBorrowerInfoApi(pagination.current,pagination.limit)\n        .then(res=>{\n          borrowerList.push(...res.data.records)\n          pagination.total = res.data.total\n        })\n    }\n    onBeforeMount(()=>{\n      getBorrowerList()\n    })\n\n    // 修改借阅者的最大借阅数量\n    const dialogVisible = shallowRef(false)\n    const borrowerResource = shallowReactive({\n      borrowMaxNum: 0,\n      borrowedNum: 0,\n      borrowerId: ''\n    })\n    function openDialog(borrowerInfo){\n      borrowerResource.borrowerId = borrowerInfo.id\n      borrowerResource.borrowedNum = borrowerInfo.borrowedNum\n      borrowerResource.borrowMaxNum = borrowerInfo.borrowMaxNum\n\n      dialogVisible.value = true\n    }\n    function updateBorrowMaxNum(){\n      updateBorrowMaxNumApi(borrowerResource.borrowerId,borrowerResource.borrowMaxNum)\n        .then(res=>{\n          ElMessage({type: 'success',message: res.message,duration: 5000,showClose:true})\n          getBorrowerList()\n          dialogVisible.value = false\n        })\n    }\n\n    return {\n      pagination,pageChange,\n      borrowerList,\n      dialogVisible,borrowerResource,openDialog,updateBorrowMaxNum\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.borrowerList{\n  padding: 20px 30px 20px 30px;\n  .el-table{\n    .operation{\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      >*{\n        margin: 0 2px 10px 2px;\n      }\n    }\n  }\n  .el-pagination{\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}