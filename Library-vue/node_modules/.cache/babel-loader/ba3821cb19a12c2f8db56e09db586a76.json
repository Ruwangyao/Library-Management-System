{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\utils\\request.js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\utils\\request.js","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1654054537000},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js","mtime":1749726396308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCBSZXN1bHRDb2RlIGZyb20gJ0AvdXRpbHMvUmVxdWVzdENvZGUnOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXBsdXMiOwppbXBvcnQgeyB1c2VVc2VySW5mb1N0b3JlIH0gZnJvbSAiQC9zdG9yZS91c2VVc2VySW5mb1N0b3JlIjsKdmFyIGJhc2VVUkwgPSAnaHR0cDovLzEyNy4wLjAuMTo4MDgwL2FwaSc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBiYXNlVVJMLAogIHRpbWVvdXQ6IDEwMDAwCn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTsKCiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChyZXMpIHsKICAgIGlmIChyZXMuc3VjY2VzcyA9PT0gdHJ1ZSAmJiByZXMuY29kZSA9PT0gUmVzdWx0Q29kZS5TVUNDRVNTKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09PSBSZXN1bHRDb2RlLlVTRVJfUkVfTE9HSU4pIHsKICAgICAgdmFyIFVzZXJJbmZvU3RvcmUgPSB1c2VVc2VySW5mb1N0b3JlKCk7IC8vIOa4hemZpOeUqOaIt+aVsOaNrgoKICAgICAgVXNlckluZm9TdG9yZS5yZXNldFVzZXJJbmZvKCk7IC8vIOmHjeaWsOeZu+W9leeKtuaAgeeggSzph43lrprlkJHliLDnmbvlvZXpobXpnaIKCiAgICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KICB9CgogIHZhciBlcnJvciA9IHJlcyAmJiByZXMubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJzsKICBFbE1lc3NhZ2UoewogICAgdHlwZTogJ2Vycm9yJywKICAgIG1lc3NhZ2U6IGVycm9yLAogICAgZHVyYXRpb246IDUwMDAsCiAgICBzaG93Q2xvc2U6IHRydWUKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBFbE1lc3NhZ2UoewogICAgdHlwZTogJ2Vycm9yJywKICAgIG1lc3NhZ2U6IGVycm9yLAogICAgZHVyYXRpb246IDUwMDAsCiAgICBzaG93Q2xvc2U6IHRydWUKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"names":["axios","getToken","router","ResultCode","ElMessage","useUserInfoStore","baseURL","service","create","timeout","interceptors","request","use","config","token","headers","error","console","log","Promise","reject","response","res","data","success","code","SUCCESS","USER_RE_LOGIN","UserInfoStore","resetUserInfo","push","message","type","duration","showClose"],"sources":["D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/utils/request.js"],"sourcesContent":["import axios from \"axios\";\nimport {getToken} from \"@/utils/auth\";\nimport router from \"@/router\";\nimport ResultCode from '@/utils/RequestCode'\nimport {ElMessage} from \"element-plus\";\nimport {useUserInfoStore} from \"@/store/useUserInfoStore\";\n\n\nconst baseURL = 'http://127.0.0.1:8080/api'\n\nconst service = axios.create({\n  baseURL: baseURL,\n  timeout: 10000\n})\n\nservice.interceptors.request.use(\n    config=>{\n      let token = getToken()\n      if(token){\n        config.headers['token'] = token\n      }\n      return config\n    },\n    error => {\n      console.log(error)\n      return Promise.reject(error)\n    }\n\n)\nservice.interceptors.response.use(\n    response=>{\n      let res = response.data\n      if(res){\n        if(res.success === true && res.code === ResultCode.SUCCESS){\n          return res\n        }else if(res.code === ResultCode.USER_RE_LOGIN){\n          const UserInfoStore = useUserInfoStore()\n          // 清除用户数据\n          UserInfoStore.resetUserInfo()\n          // 重新登录状态码,重定向到登录页面\n          router.push(\"/login\")\n        }\n      }\n      let error = (res && res.message) || '未知错误'\n      ElMessage({\n        type: 'error',\n        message: error,\n        duration: 5000,\n        showClose: true\n      })\n      return Promise.reject(error)\n    },\n    error => {\n      ElMessage({\n        type: 'error',\n        message: error,\n        duration: 5000,\n        showClose: true\n      })\n      return Promise.reject(error)\n    }\n)\n\nexport default service\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,QAAuB,cAAvB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,SAAQC,SAAR,QAAwB,cAAxB;AACA,SAAQC,gBAAR,QAA+B,0BAA/B;AAGA,IAAMC,OAAO,GAAG,2BAAhB;AAEA,IAAMC,OAAO,GAAGP,KAAK,CAACQ,MAAN,CAAa;EAC3BF,OAAO,EAAEA,OADkB;EAE3BG,OAAO,EAAE;AAFkB,CAAb,CAAhB;AAKAF,OAAO,CAACG,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,UAAAC,MAAM,EAAE;EACN,IAAIC,KAAK,GAAGb,QAAQ,EAApB;;EACA,IAAGa,KAAH,EAAS;IACPD,MAAM,CAACE,OAAP,CAAe,OAAf,IAA0BD,KAA1B;EACD;;EACD,OAAOD,MAAP;AACD,CAPL,EAQI,UAAAG,KAAK,EAAI;EACPC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACA,OAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAXL;AAcAT,OAAO,CAACG,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CACI,UAAAS,QAAQ,EAAE;EACR,IAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAnB;;EACA,IAAGD,GAAH,EAAO;IACL,IAAGA,GAAG,CAACE,OAAJ,KAAgB,IAAhB,IAAwBF,GAAG,CAACG,IAAJ,KAAatB,UAAU,CAACuB,OAAnD,EAA2D;MACzD,OAAOJ,GAAP;IACD,CAFD,MAEM,IAAGA,GAAG,CAACG,IAAJ,KAAatB,UAAU,CAACwB,aAA3B,EAAyC;MAC7C,IAAMC,aAAa,GAAGvB,gBAAgB,EAAtC,CAD6C,CAE7C;;MACAuB,aAAa,CAACC,aAAd,GAH6C,CAI7C;;MACA3B,MAAM,CAAC4B,IAAP,CAAY,QAAZ;IACD;EACF;;EACD,IAAId,KAAK,GAAIM,GAAG,IAAIA,GAAG,CAACS,OAAZ,IAAwB,MAApC;EACA3B,SAAS,CAAC;IACR4B,IAAI,EAAE,OADE;IAERD,OAAO,EAAEf,KAFD;IAGRiB,QAAQ,EAAE,IAHF;IAIRC,SAAS,EAAE;EAJH,CAAD,CAAT;EAMA,OAAOf,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAtBL,EAuBI,UAAAA,KAAK,EAAI;EACPZ,SAAS,CAAC;IACR4B,IAAI,EAAE,OADE;IAERD,OAAO,EAAEf,KAFD;IAGRiB,QAAQ,EAAE,IAHF;IAIRC,SAAS,EAAE;EAJH,CAAD,CAAT;EAMA,OAAOf,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CA/BL;AAkCA,eAAeT,OAAf"}]}