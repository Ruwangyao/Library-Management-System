{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\store\\useDynamicRouteStore.js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\store\\useDynamicRouteStore.js","mtime":1749729303121},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1750002481133},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js","mtime":1749726396308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6L1x1Njg0Q1x1OTc2Mi9cdTUyNERcdTdBRUZcdTRFQTRcdTRFOTIvZmluYWwvTGlicmFyeU1hbmFnZW1lbnRTeXN0ZW0tbWFzdGVyL0xpYnJhcnktdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovXHU2ODRDXHU5NzYyL1x1NTI0RFx1N0FFRlx1NEVBNFx1NEU5Mi9maW5hbC9MaWJyYXJ5TWFuYWdlbWVudFN5c3RlbS1tYXN0ZXIvTGlicmFyeS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXIsIGFzeW5jUm91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKLyoqCiAqIFVzZSBtZXRhLnJvbGUgdG8gZGV0ZXJtaW5lIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIHBlcm1pc3Npb24KICogQHBhcmFtIHJvbGVzCiAqIEBwYXJhbSByb3V0ZQogKi8KCmZ1bmN0aW9uIGhhc1Blcm1pc3Npb24ocm9sZXMsIHJvdXRlKSB7CiAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5yb2xlcykgewogICAgcmV0dXJuIHJvbGVzLnNvbWUoZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgcmV0dXJuIHJvdXRlLm1ldGEucm9sZXMuaW5jbHVkZXMocm9sZSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9Ci8qKgogKiBGaWx0ZXIgYXN5bmNocm9ub3VzIHJvdXRpbmcgdGFibGVzIGJ5IHJlY3Vyc2lvbgogKiBAcGFyYW0gcm91dGVzIGFzeW5jUm91dGVzCiAqIEBwYXJhbSByb2xlcwogKi8KCgpleHBvcnQgZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzLCByb2xlcykgewogIHZhciByZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciB0bXAgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZSk7CgogICAgaWYgKGhhc1Blcm1pc3Npb24ocm9sZXMsIHRtcCkpIHsKICAgICAgaWYgKHRtcC5jaGlsZHJlbikgewogICAgICAgIHRtcC5jaGlsZHJlbiA9IGZpbHRlckFzeW5jUm91dGVzKHRtcC5jaGlsZHJlbiwgcm9sZXMpOwogICAgICB9CgogICAgICByZXMucHVzaCh0bXApOwogICAgfQogIH0pOwogIHJldHVybiByZXM7Cn0KdmFyIHN0YXRlID0gewogIC8vIOWtmOWCqOe7j+i/h+adg+mZkOi/h+a7pOWQjuWxleekuueahOi3r+eUseihqAogIHJvdXRlczogW10sCiAgLy8g5a2Y5YKo5bCG6KaB6KKr56e76Zmk55qE6Lev55Sx5a+56LGh77yMdnVlLXJvdXRlcjQueOenu+mZpOi3r+eUseeahOato+ehruWnv+WKv+aYr+S/neWtmHJvdXRlci5hZGRSb3V0ZSgp5pa55rOV55qE6L+U5Zue5YC8KOexu+Wei+S4uuWHveaVsCks54S25ZCO6LCD55So6L+U5Zue5YC8CiAgd2lsbFJlbW92ZWRSb3V0ZXM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICBzdGF0ZS5yb3V0ZXMgPSBjb25zdGFudFJvdXRlci5jb25jYXQocm91dGVzKTsKICB9LAogIEFERF9SRU1PVkVEX1JPVVRFOiBmdW5jdGlvbiBBRERfUkVNT1ZFRF9ST1VURShzdGF0ZSwgcmVtb3ZlUm91dGUpIHsKICAgIHN0YXRlLndpbGxSZW1vdmVkUm91dGVzLnB1c2gocmVtb3ZlUm91dGUpOwogIH0sCiAgQ0xFQVJfUkVNT1ZFRF9ST1VURVM6IGZ1bmN0aW9uIENMRUFSX1JFTU9WRURfUk9VVEVTKHN0YXRlKSB7CiAgICBzdGF0ZS53aWxsUmVtb3ZlZFJvdXRlcyA9IFtdOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8g5qC55o2u5p2D6ZmQ55Sf5oiQ5Yqo5oCB6Lev55SxCiAgZ2VuZXJhdGVEeW5hbWljUm91dGVzOiBmdW5jdGlvbiBnZW5lcmF0ZUR5bmFtaWNSb3V0ZXMoX3JlZiwgcm9sZXMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAvLyDov4fmu6Tlh7rlhYHorrjmt7vliqDnmoTot6/nlLHlr7nosaEKICAgIHZhciBhY2Nlc3NSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcyhhc3luY1JvdXRlciwgcm9sZXMpOyAvLyDmnoTlu7rlrozmiJDnmoTot6/nlLHooagKCiAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NSb3V0ZXMpOyAvLyDmt7vliqDliqjmgIHot6/nlLEKICAgIC8vIOa3u+WKoOS5i+WJjeWFiOWwneivleWKqOaAgei3r+eUsQoKICAgIGRpc3BhdGNoKCdyZXNldER5bmFtaWNSb3V0ZXMnKTsgLy8gdnVlLXJvdXRlcjQueOWKqOaAgea3u+WKoOi3r+eUseeahOaWueazlQoKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihhY2Nlc3NSb3V0ZXMpLAogICAgICAgIF9zdGVwOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHJvdXRlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgdmFyIHJlbW92ZVJvdXRlID0gcm91dGVyLmFkZFJvdXRlKHJvdXRlKTsgLy8g5L+d5a2Y5bey5re75Yqg6Lev55Sx55qE5Zue6LCD77yM5Zyo5Yig6Zmk55qE5pe25YCZ5Lya55So5YiwCgogICAgICAgIGNvbW1pdCgnQUREX1JFTU9WRURfUk9VVEUnLCByZW1vdmVSb3V0ZSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICB9LAogIC8vIOmHjee9ruWKqOaAgei3r+eUsQogIHJlc2V0RHluYW1pY1JvdXRlczogZnVuY3Rpb24gcmVzZXREeW5hbWljUm91dGVzKF9yZWYyKSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZSwKICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CgogICAgLy8g5Yig6Zmk5Yqo5oCB6Lev55SxCiAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHN0YXRlLndpbGxSZW1vdmVkUm91dGVzKSwKICAgICAgICBfc3RlcDI7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgcmVtb3ZlUm91dGUgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgLy8g6LCD55So5pa55rOV5Yig6Zmk6Lev55SxCiAgICAgICAgcmVtb3ZlUm91dGUoKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICB9CgogICAgY29tbWl0KCdDTEVBUl9SRU1PVkVEX1JPVVRFUycpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["constantRouter","asyncRouter","router","hasPermission","roles","route","meta","some","role","includes","filterAsyncRoutes","routes","res","forEach","tmp","children","push","state","willRemovedRoutes","mutations","SET_ROUTES","concat","ADD_REMOVED_ROUTE","removeRoute","CLEAR_REMOVED_ROUTES","actions","generateDynamicRoutes","commit","dispatch","accessRoutes","addRoute","resetDynamicRoutes","namespaced"],"sources":["D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/store/useDynamicRouteStore.js"],"sourcesContent":["import { constantRouter, asyncRouter } from '@/router'\nimport router from \"@/router\"\n\n/**\n * Use meta.role to determine if the current user has permission\n * @param roles\n * @param route\n */\nfunction hasPermission(roles, route) {\n  if (route.meta && route.meta.roles) {\n    return roles.some(role => route.meta.roles.includes(role))\n  } else {\n    return true\n  }\n}\n\n/**\n * Filter asynchronous routing tables by recursion\n * @param routes asyncRoutes\n * @param roles\n */\nexport function filterAsyncRoutes(routes, roles) {\n  const res = []\n\n  routes.forEach(route => {\n    const tmp = { ...route }\n    if (hasPermission(roles, tmp)) {\n      if (tmp.children) {\n        tmp.children = filterAsyncRoutes(tmp.children, roles)\n      }\n      res.push(tmp)\n    }\n  })\n  return res\n}\n\nconst state = {\n  // 存储经过权限过滤后展示的路由表\n  routes: [],\n  // 存储将要被移除的路由对象，vue-router4.x移除路由的正确姿势是保存router.addRoute()方法的返回值(类型为函数),然后调用返回值\n  willRemovedRoutes: []\n}\n\nconst mutations = {\n  SET_ROUTES(state, routes) {\n    state.routes = constantRouter.concat(routes)\n  },\n  ADD_REMOVED_ROUTE(state, removeRoute) {\n    state.willRemovedRoutes.push(removeRoute)\n  },\n  CLEAR_REMOVED_ROUTES(state) {\n    state.willRemovedRoutes = []\n  }\n}\n\nconst actions = {\n  // 根据权限生成动态路由\n  generateDynamicRoutes({ commit, dispatch }, roles) {\n    // 过滤出允许添加的路由对象\n    const accessRoutes = filterAsyncRoutes(asyncRouter, roles)\n    // 构建完成的路由表\n    commit('SET_ROUTES', accessRoutes)\n    // 添加动态路由\n    // 添加之前先尝试动态路由\n    dispatch('resetDynamicRoutes')\n    // vue-router4.x动态添加路由的方法\n    for (let route of accessRoutes) {\n      let removeRoute = router.addRoute(route)\n      // 保存已添加路由的回调，在删除的时候会用到\n      commit('ADD_REMOVED_ROUTE', removeRoute)\n    }\n  },\n  // 重置动态路由\n  resetDynamicRoutes({ state, commit }) {\n    // 删除动态路由\n    for (let removeRoute of state.willRemovedRoutes) {\n      // 调用方法删除路由\n      removeRoute()\n    }\n    commit('CLEAR_REMOVED_ROUTES')\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}"],"mappings":";;;;;;;AAAA,SAASA,cAAT,EAAyBC,WAAzB,QAA4C,UAA5C;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,KAA9B,EAAqC;EACnC,IAAIA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWF,KAA7B,EAAoC;IAClC,OAAOA,KAAK,CAACG,IAAN,CAAW,UAAAC,IAAI;MAAA,OAAIH,KAAK,CAACC,IAAN,CAAWF,KAAX,CAAiBK,QAAjB,CAA0BD,IAA1B,CAAJ;IAAA,CAAf,CAAP;EACD,CAFD,MAEO;IACL,OAAO,IAAP;EACD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,OAAO,SAASE,iBAAT,CAA2BC,MAA3B,EAAmCP,KAAnC,EAA0C;EAC/C,IAAMQ,GAAG,GAAG,EAAZ;EAEAD,MAAM,CAACE,OAAP,CAAe,UAAAR,KAAK,EAAI;IACtB,IAAMS,GAAG,qBAAQT,KAAR,CAAT;;IACA,IAAIF,aAAa,CAACC,KAAD,EAAQU,GAAR,CAAjB,EAA+B;MAC7B,IAAIA,GAAG,CAACC,QAAR,EAAkB;QAChBD,GAAG,CAACC,QAAJ,GAAeL,iBAAiB,CAACI,GAAG,CAACC,QAAL,EAAeX,KAAf,CAAhC;MACD;;MACDQ,GAAG,CAACI,IAAJ,CAASF,GAAT;IACD;EACF,CARD;EASA,OAAOF,GAAP;AACD;AAED,IAAMK,KAAK,GAAG;EACZ;EACAN,MAAM,EAAE,EAFI;EAGZ;EACAO,iBAAiB,EAAE;AAJP,CAAd;AAOA,IAAMC,SAAS,GAAG;EAChBC,UADgB,sBACLH,KADK,EACEN,MADF,EACU;IACxBM,KAAK,CAACN,MAAN,GAAeX,cAAc,CAACqB,MAAf,CAAsBV,MAAtB,CAAf;EACD,CAHe;EAIhBW,iBAJgB,6BAIEL,KAJF,EAISM,WAJT,EAIsB;IACpCN,KAAK,CAACC,iBAAN,CAAwBF,IAAxB,CAA6BO,WAA7B;EACD,CANe;EAOhBC,oBAPgB,gCAOKP,KAPL,EAOY;IAC1BA,KAAK,CAACC,iBAAN,GAA0B,EAA1B;EACD;AATe,CAAlB;AAYA,IAAMO,OAAO,GAAG;EACd;EACAC,qBAFc,uCAE8BtB,KAF9B,EAEqC;IAAA,IAA3BuB,MAA2B,QAA3BA,MAA2B;IAAA,IAAnBC,QAAmB,QAAnBA,QAAmB;IACjD;IACA,IAAMC,YAAY,GAAGnB,iBAAiB,CAACT,WAAD,EAAcG,KAAd,CAAtC,CAFiD,CAGjD;;IACAuB,MAAM,CAAC,YAAD,EAAeE,YAAf,CAAN,CAJiD,CAKjD;IACA;;IACAD,QAAQ,CAAC,oBAAD,CAAR,CAPiD,CAQjD;;IARiD,2CAS/BC,YAT+B;IAAA;;IAAA;MASjD,oDAAgC;QAAA,IAAvBxB,KAAuB;QAC9B,IAAIkB,WAAW,GAAGrB,MAAM,CAAC4B,QAAP,CAAgBzB,KAAhB,CAAlB,CAD8B,CAE9B;;QACAsB,MAAM,CAAC,mBAAD,EAAsBJ,WAAtB,CAAN;MACD;IAbgD;MAAA;IAAA;MAAA;IAAA;EAclD,CAhBa;EAiBd;EACAQ,kBAlBc,qCAkBwB;IAAA,IAAjBd,KAAiB,SAAjBA,KAAiB;IAAA,IAAVU,MAAU,SAAVA,MAAU;;IACpC;IADoC,4CAEZV,KAAK,CAACC,iBAFM;IAAA;;IAAA;MAEpC,uDAAiD;QAAA,IAAxCK,WAAwC;QAC/C;QACAA,WAAW;MACZ;IALmC;MAAA;IAAA;MAAA;IAAA;;IAMpCI,MAAM,CAAC,sBAAD,CAAN;EACD;AAzBa,CAAhB;AA4BA,eAAe;EACbK,UAAU,EAAE,IADC;EAEbf,KAAK,EAALA,KAFa;EAGbE,SAAS,EAATA,SAHa;EAIbM,OAAO,EAAPA;AAJa,CAAf"}]}