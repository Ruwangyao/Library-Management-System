{"remainingRequest":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\store\\useUserInfoStore.js","dependencies":[{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\src\\store\\useUserInfoStore.js","mtime":1749729030278},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\babel.config.js","mtime":1750002481133},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\unplugin\\dist\\webpack\\loaders\\transform.js","mtime":1749726393299},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749726397539},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1749726398436},{"path":"D:\\桌面\\前端交互\\final\\LibraryManagementSystem-master\\Library-vue\\node_modules\\eslint-loader\\index.js","mtime":1749726396308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1Njg0Q1x1OTc2Mi9cdTUyNERcdTdBRUZcdTRFQTRcdTRFOTIvZmluYWwvTGlicmFyeU1hbmFnZW1lbnRTeXN0ZW0tbWFzdGVyL0xpYnJhcnktdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy9pbXBvcnQge2RlZmluZVN0b3JlfSBmcm9tICJwaW5pYSI7CmltcG9ydCB7IHVzZUR5bmFtaWNSb3V0aW5nU3RvcmUgfSBmcm9tICJAL3N0b3JlL3VzZUR5bmFtaWNSb3V0ZVN0b3JlIjsKaW1wb3J0IHsgdXNlQXBwU2V0dGluZ1N0b3JlIH0gZnJvbSAiQC9zdG9yZS91c2VBcHBTZXR0aW5nU3RvcmUiOwppbXBvcnQgeyBnZXRVc2VySW5mb0FwaSB9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgeyByZW1vdmVUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7CmltcG9ydCB7IGdldFVzZXJSZXNvdXJjZUFwaSB9IGZyb20gIkAvYXBpL2JvcnJvd2VyIjsKdmFyIHN0YXRlID0gewogIHVpZDogJycsCiAgbmFtZTogJycsCiAgZW1haWw6ICcnLAogIHBlcm1pc3Npb25zOiBbXSwKICAvLyDnlKjmiLfnmoTlgJ/pmIXotYTmupAKICB1c2VyQm9va1Jlc291cmNlOiB7CiAgICBib3Jyb3dlZE51bTogbnVsbCwKICAgIGJvcnJvd01heE51bTogbnVsbAogIH0KfTsKdmFyIGdldHRlcnMgPSB7CiAgLy8g5piv5ZCm5bey57uP6I635Y+W5LqG55So5oi355qE5L+h5oGvCiAgaGFzR2V0VXNlckluZm86IGZ1bmN0aW9uIGhhc0dldFVzZXJJbmZvKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudWlkICE9PSAnJyAmJiBzdGF0ZS5uYW1lICYmIHN0YXRlLmVtYWlsICYmIEFycmF5LmlzQXJyYXkoc3RhdGUucGVybWlzc2lvbnMpOwogIH0sCiAgLy8g5piv5ZCm6IO96I635Y+W55So5oi36LWE5rqQLOWPquacieeUqOaIt+aLpeacieWbvuS5pueahOi1hOa6kOS/oeaBrwogIGhhc1Jlc291cmNlOiBmdW5jdGlvbiBoYXNSZXNvdXJjZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnBlcm1pc3Npb25zLmluZGV4T2YoJ2JvcnJvd2VyJykgIT09IC0xOwogIH0sCiAgYm9ycm93ZWROdW06IGZ1bmN0aW9uIGJvcnJvd2VkTnVtKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlckJvb2tSZXNvdXJjZS5ib3Jyb3dlZE51bTsKICB9LAogIGJvcnJvd01heE51bTogZnVuY3Rpb24gYm9ycm93TWF4TnVtKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlckJvb2tSZXNvdXJjZS5ib3Jyb3dNYXhOdW07CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9VU0VSX0lORk86IGZ1bmN0aW9uIFNFVF9VU0VSX0lORk8oc3RhdGUsIHVzZXJJbmZvKSB7CiAgICBzdGF0ZS51aWQgPSB1c2VySW5mby5pZDsKICAgIHN0YXRlLm5hbWUgPSB1c2VySW5mby51c2VybmFtZTsKICAgIHN0YXRlLmVtYWlsID0gdXNlckluZm8uZW1haWw7CiAgICBzdGF0ZS5wZXJtaXNzaW9ucyA9IHVzZXJJbmZvLnBlcm1pc3Npb25zOwogIH0sCiAgU0VUX1VTRVJfUkVTT1VSQ0U6IGZ1bmN0aW9uIFNFVF9VU0VSX1JFU09VUkNFKHN0YXRlLCByZXNvdXJjZSkgewogICAgaWYgKHJlc291cmNlKSB7CiAgICAgIHN0YXRlLnVzZXJCb29rUmVzb3VyY2UuYm9ycm93ZWROdW0gPSByZXNvdXJjZS5ib3Jyb3dlZE51bTsKICAgICAgc3RhdGUudXNlckJvb2tSZXNvdXJjZS5ib3Jyb3dNYXhOdW0gPSByZXNvdXJjZS5ib3Jyb3dNYXhOdW07CiAgICB9CiAgfSwKICBSRVNFVF9VU0VSX0lORk86IGZ1bmN0aW9uIFJFU0VUX1VTRVJfSU5GTyhzdGF0ZSkgewogICAgc3RhdGUudWlkID0gJyc7CiAgICBzdGF0ZS5uYW1lID0gJyc7CiAgICBzdGF0ZS5lbWFpbCA9ICcnOwogICAgc3RhdGUucGVybWlzc2lvbnMgPSBbXTsKICAgIHN0YXRlLnVzZXJCb29rUmVzb3VyY2UuYm9ycm93ZWROdW0gPSBudWxsOwogICAgc3RhdGUudXNlckJvb2tSZXNvdXJjZS5ib3Jyb3dNYXhOdW0gPSBudWxsOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKF9yZWYpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBnZXRVc2VySW5mb0FwaSgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVVNFUl9JTkZPJywgcmVzLmRhdGEudXNlckluZm8pOyAvLyDmoLnmja7mnYPpmZDnlJ/miJDliqjmgIHot6/nlLEKCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ2R5bmFtaWNSb3V0ZS9nZW5lcmF0ZUR5bmFtaWNSb3V0ZXMnLCByZXMuZGF0YS51c2VySW5mby5wZXJtaXNzaW9ucywgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOyAvLyDliJ3lp4vljJbnlKjmiLfotYTmupAKCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ2dldFVzZXJSZXNvdXJjZScpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgLy8g6YeN572u55So5oi35L+h5oGvCiAgcmVzZXRVc2VySW5mbzogZnVuY3Rpb24gcmVzZXRVc2VySW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoOwogICAgLy8g5Yig6Zmk5Yqo5oCB5re75Yqg55qE6Lev55Sx5pWw5o2u77yI6YeN572udnVlLXJvdXRlcu+8iQogICAgZGlzcGF0Y2goJ2R5bmFtaWNSb3V0ZS9yZXNldER5bmFtaWNSb3V0ZXMnLCBudWxsLCB7CiAgICAgIHJvb3Q6IHRydWUKICAgIH0pOyAvLyDmuIXpmaR0b2tlbgoKICAgIHJlbW92ZVRva2VuKCk7IC8vIOmHjee9ruacrHN0b3Jl55qE5YC8CgogICAgY29tbWl0KCdSRVNFVF9VU0VSX0lORk8nKTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+i1hOa6kAogIGdldFVzZXJSZXNvdXJjZTogZnVuY3Rpb24gZ2V0VXNlclJlc291cmNlKF9yZWYzKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgZ2V0dGVycywgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgZ2V0dGVycyA9IF9yZWYzLmdldHRlcnM7CgogICAgICAgICAgICAgIGlmICghZ2V0dGVycy5oYXNSZXNvdXJjZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGdldFVzZXJSZXNvdXJjZUFwaSgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfUkVTT1VSQ0UnLCByZXMuZGF0YS5yZXNvdXJjZSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["useDynamicRoutingStore","useAppSettingStore","getUserInfoApi","removeToken","getUserResourceApi","state","uid","name","email","permissions","userBookResource","borrowedNum","borrowMaxNum","getters","hasGetUserInfo","Array","isArray","hasResource","indexOf","mutations","SET_USER_INFO","userInfo","id","username","SET_USER_RESOURCE","resource","RESET_USER_INFO","actions","getUserInfo","commit","dispatch","res","data","root","resetUserInfo","getUserResource","namespaced"],"sources":["D:/桌面/前端交互/final/LibraryManagementSystem-master/Library-vue/src/store/useUserInfoStore.js"],"sourcesContent":["//import {defineStore} from \"pinia\";\nimport {useDynamicRoutingStore} from \"@/store/useDynamicRouteStore\";\nimport {useAppSettingStore} from \"@/store/useAppSettingStore\";\nimport {getUserInfoApi} from \"@/api/user\";\nimport {removeToken} from \"@/utils/auth\";\nimport {getUserResourceApi} from \"@/api/borrower\";\n\nconst state = {\n  uid: '',\n  name: '',\n  email: '',\n  permissions: [],\n  // 用户的借阅资源\n  userBookResource: {\n    borrowedNum: null,\n    borrowMaxNum: null,\n  }\n}\n\nconst getters = {\n  // 是否已经获取了用户的信息\n  hasGetUserInfo: (state) => {\n    return state.uid !== '' && state.name && state.email && Array.isArray(state.permissions)\n  },\n  // 是否能获取用户资源,只有用户拥有图书的资源信息\n  hasResource: (state) => {\n    return state.permissions.indexOf('borrower') !== -1\n  },\n  borrowedNum: (state) => {\n    return state.userBookResource.borrowedNum\n  },\n  borrowMaxNum: (state) => {\n    return state.userBookResource.borrowMaxNum\n  }\n}\n\nconst mutations = {\n  SET_USER_INFO(state, userInfo) {\n    state.uid = userInfo.id\n    state.name = userInfo.username\n    state.email = userInfo.email\n    state.permissions = userInfo.permissions\n  },\n  SET_USER_RESOURCE(state, resource) {\n    if (resource) {\n      state.userBookResource.borrowedNum = resource.borrowedNum\n      state.userBookResource.borrowMaxNum = resource.borrowMaxNum\n    }\n  },\n  RESET_USER_INFO(state) {\n    state.uid = ''\n    state.name = ''\n    state.email = ''\n    state.permissions = []\n    state.userBookResource.borrowedNum = null\n    state.userBookResource.borrowMaxNum = null\n  }\n}\n\nconst actions = {\n  // 获取用户信息\n  async getUserInfo({ commit, dispatch }) {\n    const res = await getUserInfoApi()\n    commit('SET_USER_INFO', res.data.userInfo)\n    \n    // 根据权限生成动态路由\n    dispatch('dynamicRoute/generateDynamicRoutes', res.data.userInfo.permissions, { root: true })\n    \n    // 初始化用户资源\n    dispatch('getUserResource')\n  },\n  // 重置用户信息\n  resetUserInfo({ commit, dispatch }) {\n    // 删除动态添加的路由数据（重置vue-router）\n    dispatch('dynamicRoute/resetDynamicRoutes', null, { root: true })\n    \n    // 清除token\n    removeToken()\n    \n    // 重置本store的值\n    commit('RESET_USER_INFO')\n  },\n  // 获取用户资源\n  async getUserResource({ commit, getters }) {\n    if (getters.hasResource) {\n      const res = await getUserResourceApi()\n      commit('SET_USER_RESOURCE', res.data.resource)\n    }\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n}"],"mappings":"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"}]}